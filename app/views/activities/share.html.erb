 <div class="share-page">
      <header class="share-header">
        <img src="/HEADER.svg" alt="Voxxy logo" class="voxxy-logo" />
      </header>

      <!-- Main activity card -->
      <section class="card">
        <h2 class="activity-title"><%= @activity.emoji %> <%= @activity.activity_name %></h2>

        <% if @activity.date_day.present? && @activity.date_time.present? %>
          <div class="countdown-label">‚è≤ Event starts in ...</div>
          <div id="countdown" data-datetime="<%= @activity.date_day.to_time.change(
            hour: @activity.date_time.hour,
            min:  @activity.date_time.min
          ).iso8601 %>"></div>
        <% end %>
      </section>

      <!-- Organizer message -->
      <% if @activity.welcome_message.present? %>
        <div class="card">
          <h2>üó£Ô∏è Message from Organizer</h2>
          <p class='rest-desc'><%= @activity.welcome_message %></p>
        </div>
      <% end %>

      <!-- Final date & time -->
      <% if @activity.date_day.present? && @activity.date_time.present? %>
        <div class="card">
          <h2>üóì Final Date &amp; Time</h2>
          <p>
            <%= @activity.date_day.strftime("%A, %B %-d, %Y") %>
            at
            <%= @activity.date_time.strftime("%I:%M %p") %>
          </p>
        </div>
      <% end %>

      <!-- Final restaurant -->
      <% if (pinned = @activity.pinned_activities.find_by(selected: true)) %>
        <div class="card">
          <h2>üìç Final Restaurant</h2>
          <p class="rest-name"><%= pinned.title %></p>
          <% if pinned.description.present? %>
            <p class="rest-desc"><%= pinned.description %></p>
          <% end %>
          <p class="rest-address"><%= pinned.address %></p>
          <p class="rest-price">Price: <%= pinned.price_range %></p>
          <% if pinned.website.present? %>
            <a href="<%= pinned.website %>" target="_blank" rel="noopener" class="maps-button">
              Visit Website
            </a>
          <% end %>
          <% if pinned.address.present? %>
            <a href="https://maps.google.com?q=<%= CGI.escape(pinned.address) %>"
               target="_blank" rel="noopener" class="maps-button">
              Open in Maps
            </a>
          <% end %>
        </div>
      <% end %>

      <!-- Attendees -->
      <div class="card">
        <h2>üë• Attendee List</h2>
        <ul class="attendee-pills">
            <li class="pill">Organizer: <%= @activity.user.name %></li>
          <% @activity.participants.each do |p| %>
            <% first = p.name.split(" ").first %>
            <li class="pill"><%= first %></li>
          <% end %>
        </ul>
      </div>
      <button class="share-button" id="sharePlan">Share Plan</button>
    </div>

    <script>
      // Countdown logic
      document.addEventListener('DOMContentLoaded', function() {
        var el = document.getElementById('countdown');
        if (!el) return;
        var target = new Date(el.dataset.datetime).getTime();
        function updateCountdown() {
          var diff = target - Date.now();
          if (diff <= 0) {
            el.innerHTML = '<div class="cd-card"><strong>00</strong><small>Started</small></div>';
            clearInterval(timer);
            return;
          }
          var days    = Math.floor(diff / (1e3 * 60 * 60 * 24)),
              hours   = Math.floor((diff / (1e3 * 60 * 60)) % 24),
              mins    = Math.floor((diff / (1e3 * 60)) % 60),
              secs    = Math.floor((diff / 1e3) % 60);
          function pad(n){ return String(n).padStart(2,'0'); }
          el.innerHTML =
            '<span class="cd-card"><strong>' + days  + '</strong><small>Days</small></span>' +
            '<span class="cd-card"><strong>' + pad(hours)  + '</strong><small>Hours</small></span>' +
            '<span class="cd-card"><strong>' + pad(mins)   + '</strong><small>Minutes</small></span>' +
            '<span class="cd-card"><strong>' + pad(secs)   + '</strong><small>Seconds</small></span>';
        }
        updateCountdown();
        var timer = setInterval(updateCountdown, 1000);
      });

      // Share Plan button
      document.getElementById('sharePlan').addEventListener('click', function() {
        navigator.clipboard.writeText(window.location.href)
          .then(() => alert('Link copied to clipboard!'))
          .catch(() => alert('Could not copy link'));
      });
    </script>